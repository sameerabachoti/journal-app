{"ast":null,"code":"var _jsxFileName = \"/Users/sameera/Documents/journalApp/app/src/NewEntry.js\";\nimport React from 'react';\nimport { Button, Container, Form, FormGroup, Input, Label } from 'reactstrap';\nimport { withRouter } from 'react-router-dom';\n\nclass NewEntry extends React.Component {\n  constructor(props) {\n    super(props);\n    this.emptyEntry = {\n      id: '',\n      title: '',\n      content: '',\n      dateCreated: '',\n      dateModified: '',\n      category: {\n        name: ''\n      },\n      user: {\n        id: '',\n        firstName: '',\n        lastName: '',\n        email: ''\n      }\n    };\n    this.state = {\n      entry: this.emptyEntry,\n      errors: {\n        title: '',\n        category: '',\n        content: ''\n      }\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async componentDidMount() {\n    const {\n      entry\n    } = this.state;\n    entry.id = this.props.match.params.id;\n    this.setState({\n      entry\n    });\n    const response = await fetch('/api/user', {\n      credentials: 'include'\n    });\n    const body = await response.text();\n    console.log(\"user \", body);\n\n    if (body === '') {\n      this.setState({\n        isAuthenticated: false\n      });\n    } else {\n      this.setState({\n        isAuthenticated: true,\n        user: JSON.parse(body)\n      });\n    }\n\n    if (entry.id) {\n      const entryDetails = await fetch(`/api/entry/${entry.id}`);\n      const entryResponse = await entryDetails.text();\n      console.log(\"entry response \", entryResponse);\n\n      if (entryResponse !== '') {\n        this.setState({\n          entry: JSON.parse(entryResponse)\n        });\n      }\n    }\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const {\n      entry\n    } = this.state;\n    entry.user.firstName = this.state.user.given_name;\n    entry.user.lastName = this.state.user.family_name;\n    entry.user.email = this.state.user.email;\n\n    if (entry.id) {\n      await fetch('/api/entry/:id', {\n        method: 'PUT',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(entry)\n      });\n    } else {\n      await fetch('/api/entry/', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(entry)\n      });\n    }\n\n    this.props.history.push('/entries');\n    window.location.reload(false);\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    let entry = { ...this.state.entry\n    };\n    let errors = this.state.errors;\n    entry[name] = value;\n\n    if (name == 'category') {\n      errors.category = value === '' ? 'Category is required' : '';\n      entry[name] = {\n        name: value\n      };\n    } else if (name == 'title') {\n      errors.title = value === '' ? 'Title is required' : '';\n    } else if (name == 'content') {\n      errors.content = value === '' ? 'Entry is required' : '';\n    }\n\n    this.setState({\n      errors,\n      [name]: value\n    });\n    this.setState({\n      entry\n    });\n  }\n\n  render() {\n    const {\n      entry\n    } = this.state;\n    const {\n      errors\n    } = this.state;\n    let isDisabled = errors.title || errors.category || errors.content;\n    const divStyle = {\n      'margin-left': '300px',\n      'border-style': 'solid',\n      'border-width': '1px',\n      'padding-left': '20px',\n      'padding-bottom': '350px',\n      'border-radius': '10px'\n    };\n    const error = {\n      'font-size': '15px',\n      'color': 'red'\n    };\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      style: divStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      style: {\n        width: \"500px\"\n      },\n      name: \"title\",\n      id: \"title\",\n      value: entry.title || '',\n      onChange: this.handleChange,\n      autoComplete: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: error,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, errors.title)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, \"Category\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      style: {\n        width: \"500px\"\n      },\n      name: \"category\",\n      id: \"category\",\n      value: entry.category.name || '',\n      onChange: this.handleChange,\n      autoComplete: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: error,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, errors.category)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }, \"Entry\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"textarea\",\n      style: {\n        width: \"600px\",\n        height: \"600px\"\n      },\n      name: \"content\",\n      id: \"content\",\n      value: entry.content || '',\n      onChange: this.handleChange,\n      autoComplete: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: error,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, errors.content)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      type: \"submit\",\n      disabled: isDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, \"Save\"), ' ', /*#__PURE__*/React.createElement(Button, {\n      color: \"secondary\",\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }, \"Cancel\"))));\n  }\n\n}\n\nexport default withRouter(NewEntry);","map":{"version":3,"sources":["/Users/sameera/Documents/journalApp/app/src/NewEntry.js"],"names":["React","Button","Container","Form","FormGroup","Input","Label","withRouter","NewEntry","Component","constructor","props","emptyEntry","id","title","content","dateCreated","dateModified","category","name","user","firstName","lastName","email","state","entry","errors","handleChange","bind","handleSubmit","componentDidMount","match","params","setState","response","fetch","credentials","body","text","console","log","isAuthenticated","JSON","parse","entryDetails","entryResponse","event","preventDefault","given_name","family_name","method","headers","stringify","history","push","window","location","reload","target","value","render","isDisabled","divStyle","error","width","height"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, Container, Form, FormGroup, Input, Label } from 'reactstrap';\nimport { withRouter } from 'react-router-dom';\n\nclass NewEntry extends React.Component {\n\t\n\temptyEntry = {\n\t\t    id: '',\n\t\t    title: '',\n\t\t    content: '',\n\t\t    dateCreated: '',\n\t\t    dateModified: '', \n\t\t    category: {name: ''},\n\t\t    user: {id: '',\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\temail: ''}\n\t};\n\t\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \tentry: this.emptyEntry,\n\t    \terrors: {\n\t            title: '',\n\t            category: '',\n\t            content: '',\n\t          }\n\t    };\n\t    this.handleChange = this.handleChange.bind(this);\n\t    this.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\t\n\tasync componentDidMount() {\n\t\tconst {entry} = this.state;\n\t\tentry.id = this.props.match.params.id;\n\t\tthis.setState({entry});\n\t    const response = await fetch('/api/user', {credentials: 'include'});\n\t    const body = await response.text();\n\t    console.log(\"user \", body);\n\t    if (body === '') {\n\t\t    this.setState(({isAuthenticated: false}))\n\t\t} else {\n\t\t    this.setState({isAuthenticated: true, user: JSON.parse(body)})\n\t\t}\n\t    \n\t    if(entry.id){\n\t    \tconst entryDetails = await fetch(`/api/entry/${entry.id}`);\n\t    \tconst entryResponse = await entryDetails.text();\n\t    \tconsole.log(\"entry response \", entryResponse);\n\t    \tif (entryResponse !== '') {\n\t    \t\tthis.setState({entry: JSON.parse(entryResponse)});\n\t\t\t} \n\t    }\n\t}\n\t\n\tasync handleSubmit(event) {\n\t    event.preventDefault();\n\t    const {entry} = this.state;\n\t    entry.user.firstName = this.state.user.given_name;\n\t    entry.user.lastName = this.state.user.family_name;\n\t    entry.user.email = this.state.user.email;\n\t    if(entry.id){\n\t\t    await fetch('/api/entry/:id', {\n\t\t      method: 'PUT',\n\t\t      headers: {\n\t\t        'Accept': 'application/json',\n\t\t        'Content-Type': 'application/json'\n\t\t      },\n\t\t      body: JSON.stringify(entry)\n\t\t    });\n\t    }\n\t    else{\n\t    \tawait fetch('/api/entry/', {   \t\n\t\t\t    method: 'POST',\n\t\t\t    headers: {\n\t\t\t      'Accept': 'application/json',\n\t\t\t      'Content-Type': 'application/json'\n\t\t\t    },\n\t\t\t    body: JSON.stringify(entry)\n\t\t\t });\n\t    \t\n\t    }\n\t    this.props.history.push('/entries');\n\t    window.location.reload(false);\n\t }\n\t\n\thandleChange(event) {\n\t\tconst target = event.target;\n\t    const value = target.value;\n\t    const name = target.name;\n\t    let entry = {...this.state.entry};\n\t    let errors = this.state.errors;\n\t    \n\t    entry[name] = value;\n\t    if(name=='category'){\n\t    \terrors.category = value === '' ? 'Category is required' : '';\n\t    \tentry[name] = {name: value}\n\t    }\n\t    else if(name == 'title'){\n\t    \terrors.title = value === '' ? 'Title is required' : '';\n\t    }\n\t    else if(name == 'content'){\n\t    \terrors.content = value === '' ? 'Entry is required' : '';\n\t    }\n\t    \n\t    this.setState({errors, [name]: value});\n\t    this.setState({entry});\n\t}\n\t\n\trender() {\n\t\tconst {entry} = this.state;\n\t\tconst {errors} = this.state;\n\t\tlet isDisabled = errors.title || errors.category || errors.content;\n\t\t\n\t\tconst divStyle = {\n\t\t\t\t'margin-left': '300px', \n\t\t\t\t'border-style': 'solid',\n\t\t\t\t'border-width': '1px',\n\t\t\t\t'padding-left': '20px', \n\t\t\t\t'padding-bottom': '350px',\n\t\t\t\t'border-radius': '10px'\n\t\t};\n\t\t\n\t\tconst error = {\n\t\t\t'font-size': '15px',\n\t\t\t'color': 'red'\n\t\t}\n\t\t\n\t\treturn(\n\t\t\t\t<Container>\n\t\t         <Form onSubmit={this.handleSubmit} style={divStyle}>\n\t\t          <FormGroup>\n\t\t            <Label for=\"title\">Title</Label>\n\t\t            <Input type=\"text\"style={{width: \"500px\"}} name=\"title\" id=\"title\" value={entry.title || ''}\n\t\t                   onChange={this.handleChange} autoComplete=\"title\"/>\n\t\t            <span style={error}>{errors.title}</span>\n\t\t          </FormGroup>\n\t\t          <FormGroup>\n\t\t            <Label for=\"category\">Category</Label>\n\t\t            <Input type=\"text\" style={{width: \"500px\"}} name=\"category\" id=\"category\" value={entry.category.name || ''}\n\t\t                   onChange={this.handleChange} autoComplete=\"title\"/>\n\t\t            <span style={error}>{errors.category}</span>\n\t\t          </FormGroup>\n\t\t          <FormGroup>\n\t\t            <Label for=\"content\">Entry</Label>\n\t\t            <Input type=\"textarea\" style={{width: \"600px\", height: \"600px\"}} name=\"content\" id=\"content\" value={entry.content || ''}\n\t\t                   onChange={this.handleChange} autoComplete=\"content\"/>\n\t\t            <span style={error}>{errors.content}</span>\n\t\t          </FormGroup>\n\t\t          <FormGroup>\n\t\t            <Button color=\"primary\" type=\"submit\" disabled={isDisabled}>Save</Button>{' '}\n\t\t            <Button color=\"secondary\" to=\"/\">Cancel</Button>\n\t\t          </FormGroup>\n\t\t        </Form>\n\t\t      </Container>\n\t\t)\n\t}\n\t\n}\n\nexport default withRouter(NewEntry);"]},"metadata":{},"sourceType":"module"}